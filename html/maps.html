<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Maps</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>

    <!-- Header -->
    <header>
        <h1>Game Maps</h1>
    </header>

    <!-- Navigation -->
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="maps.html">Maps</a></li>
            <li><a href="quests.html">Quests</a></li>
        </ul>
    </nav>

    <!-- Map Viewer -->
    <section>
        <h2>Interactive Map Viewer</h2>
        <select id="map-selector">
            <option value="map_norrath.txt">Norrath Map</option>
            <option value="map_blackburrow.txt">Blackburrow</option>
            <option value="map_kunark.txt">Kunark</option>
            <option value="map_velious.txt">Velious</option>
            <option value="map_umbral_plains.txt">Umbral Plains</option>
        </select>
        <canvas id="mapCanvas" width="800" height="600"></canvas>
    </section>

    <!-- Footer -->
    <footer>
        <p>âœ… Select a map from the dropdown to view different locations.</p>
    </footer>

    <!-- JavaScript for EQ Maps -->
    <script>
        document.getElementById('map-selector').addEventListener('change', function() {
            loadMap("../db/maps/" + this.value);
        });

        function loadMap(mapPath) {
            fetch(mapPath)
                .then(response => response.text())
                .then(data => {
                    let canvas = document.getElementById('mapCanvas');
                    let ctx = canvas.getContext('2d');
                    ctx.clearRect(0, 0, canvas.width, canvas.height);

                    data.split('\n').forEach(line => {
                        let parts = line.split(', ');
                        if (parts[0] === 'P') { // Parse EQ Map Points
                            let x = parseFloat(parts[1]);
                            let y = parseFloat(parts[2]);
                            let size = parseInt(parts[6]);
                            let color = `rgb(${parts[3]}, ${parts[4]}, ${parts[5]})`;

                            ctx.fillStyle = color;
                            ctx.beginPath();
                            ctx.arc(x, y, size, 0, Math.PI * 2);
                            ctx.fill();
                        }
                    });
                })
                .catch(error => console.error('Error loading map:', error));
        }
    </script>
<script src="../js/maploader.js"></script>
</body>
</html>
